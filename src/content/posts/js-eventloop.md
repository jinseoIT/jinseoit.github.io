---
title: Javascript ë™ì‘ì›ë¦¬ì™€ Eventloop
description: Javascript ë™ì‘ì›ë¦¬ì™€ Eventloop
author: "jinseoit"
image: "https://velog.velcdn.com/images/radin/post/2b52d838-592a-4dda-a0f5-0623fbc28a3b/image.gif"
published: 2023-10-10
tags: [JavaScript]
---

![](https://velog.velcdn.com/images/radin/post/2b52d838-592a-4dda-a0f5-0623fbc28a3b/image.gif)

## ë“¤ì–´ê°€ê¸°

> ğŸ’¡Javasciprt ë™ì‘ì›ë¦¬ì™€ ì´ë²¤íŠ¸ ë£¨í”„ë¥¼ ì•Œì•„ë³´ê¸° ì „ ëª‡ê°€ì§€ ì§ˆë¬¸ì„ í•´ë´…ë‹ˆë‹¤.

1. Javascriptì€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ” ì–¸ì–´ ì¸ê°€ìš”?
2. ì‹±ê¸€ìŠ¤ë ˆë“œ ê¸°ë°˜ì¸ ì–¸ì–´ì¸ë° ëŠë¦¬ì§„ ì•Šì„ê¹Œìš”?
3. ë™ì‹œì„±ì„ ì–´ë–»ê²Œ ê°€ì§„ê±¸ê¹Œìš”? Javascriptì˜ íŠ¹ì§•ì¸ê°€ìš”?

## ê°œìš”

> Javascriptì€ ì‹±ê¸€ì“°ë ˆë“œ ì–¸ì–´ì´ë‹¤, non blocking ë°©ì‹ì´ë‹¤, ë™ì‹œì„±ì„ ê°€ì§„ë‹¤ ë“± ê´€ë ¨ëœ ì—¬ëŸ¬ ì£¼ì œ ë“¤ì— ê´€í•˜ì—¬ how? why? ë¥¼ ê³ ë¯¼í•˜ë©° ì•„í‹°í´ì„ ì°¸ê³ í•˜ì—¬ ì •ë¦¬í•œ ê¸€ì…ë‹ˆë‹¤.

## 1. ğŸ¬Javascript ë™ì‘ì›ë¦¬

### 1-1 ğŸ¤”Javascript ë³€ìˆ˜ë“¤ì€ ì–´ë””ì— ì €ì¥ì´ ë ê¹Œ?

> ğŸ’¡Javascriptì˜ ë°ì´í„° íƒ€ì…ì€ í¬ê²Œ ë‘ê°€ì§€ë¡œ ë‚˜ëˆ„ì–´ ì§„ë‹¤.

1. Primitive(ì›ì‹œ) type - Number, String, Boolean, null, undefined, Symbol
2. Reference(ì°¸ì¡°) type - Array, Function, Date, RegExp, Map, WeakMap, Set, WeakSet

![](https://velog.velcdn.com/images/radin/post/49ca3802-7e9b-433a-a178-f05948ac8b6a/image.png)

ìœ„ ê·¸ë¦¼ì²˜ëŸ¼ ì›ì‹œ(ê¸°ë³¸) íƒ€ì…ì€ **Call Stack**ì— ì €ì¥ì´ ë˜ê³  ì°¸ì¡°(ê°ì²´)íƒ€ì…ì€ **Memory Heap**ì— ì €ì¥ë˜ëŠ”ê±¸ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.

### 1-2 ğŸ¤”JavascriptëŠ” ì–´ë–»ê²Œ ì‹¤í–‰ì´ ë ê¹Œ?

> ğŸ’¡**Call Stack**ì€ ì›ì‹œíƒ€ì…ì„ ì €ì¥í•  ë¿ë§Œ ì•„ë‹ˆë¼ **ì‹¤í–‰ ì½˜í…ìŠ¤íŠ¸(Execution Context)**ë¥¼ í†µí•´ í˜„ì¬ ì–´ë–¤ í•¨ìˆ˜ê°€ ë™ì‘í•˜ê³  ìˆëŠ”ì§€, ê·¸ í•¨ìˆ˜ ë‚´ì—ì„œ ì–´ë–¤ í•¨ìˆ˜ê°€ ë™ì‘í•˜ëŠ”ì§€, ë‹¤ìŒì— ì–´ë–¤ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ì–´ì•¼í•˜ëŠ”ì§€ ë“±ì„ ì œì–´ í•œë‹¤.

ì•„ë˜ì˜ ì½”ë“œë¥¼ ë³´ë©° Call Stackì´ ì–´ë–»ê²Œ ë™ì‘í• ì§€ ìƒê°í•´ ë³´ì

```javascript
function multiply(a, b) {
  return a * b;
}

function square(n) {
  return multiply(n, n);
}

function printSquare(x) {
  let n = square(x);
  console.log(n);
}

printSquare(5);
```

![](https://velog.velcdn.com/images/radin/post/01907d35-55e1-40df-9677-e38c1a6147cf/image.png)

ìœ„ ì‚¬ì§„ê³¼ ê°™ì´ ì‹¤í–‰ìˆœì„œì— ë”°ë¼ ìŠ¤íƒì´ ìŒ“ì´ê³  ì‹¤í–‰ì´ ëë‚˜ë©´ ìŠ¤íƒì—ì„œ ì‚¬ë¼ì§€ëŠ” ë°©ì‹ìœ¼ë¡œ ì‹¤í–‰ì´ ëœë‹¤.

> ğŸ¤” Q í˜¹ì‹œ ì‹¤í–‰ì´ ê³„ì† ìŒ“ì´ê²Œ ë˜ì–´ìˆëŠ” ì¬ê·€í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ë©´ ì–´ë–»ê²Œ ë™ì‘í• ê¹Œ?

ì•„ë˜ì˜ ì½”ë“œë¥¼ ì˜ˆë¡œ ë“¤ì–´ ì½œ ìŠ¤íƒì´ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ ë³´ì

```javascript
function foo() {
  return foo();
}
foo();
```

![](https://velog.velcdn.com/images/radin/post/ba9223f4-5f37-44e4-b9d9-c7f057b8d5ae/image.png)

í˜¸ì¶œ ìŠ¤íƒ(Call Stack)ì˜ ìµœëŒ€ í—ˆìš©ì¹˜ë¥¼ ë„˜ê²Œ ë˜ì–´ **Uncaught RangeError: Maximum call stack size exceeded** ì—ëŸ¬ê°€ ë‚˜ì˜¨ë‹¤.

### 1-3 ğŸ™ŠJavascriptì˜ blocking

> ğŸ’¡ blockingì— ëŒ€í•œ ì •í™•í•œ ì •ì˜ëŠ” ì—†ì§€ë§Œ â€œëŠë¦¬ê²Œ ë™ì‘í•˜ëŠ” ì½”ë“œâ€ ë¡œ ì„¤ëª… í•  ìˆ˜ ìˆë‹¤. ì¦‰, ì½œ ìŠ¤íƒì— í˜„ì¬ ëŠë¦¬ê²Œ ë™ì‘í•˜ëŠ” ì‘ì—…ì´ ë‚¨ì•„ ìˆëŠ” ê²ƒì„ ë§í•œë‹¤. ex) whileë¬¸ì•ˆì˜ ìˆ˜ì‹­ì–µê°œì˜ ë™ì‘ë¬¸, ë„¤íŠ¸ì›Œí¬ ìš”ì²­, ì´ë¯¸ì§€ í”„ë¡œì„¸ì‹± ë“±

ë§Œì•½ 10ì´ˆê°€ ê±¸ë¦¬ëŠ” ë„¤íŠ¸ì›Œí¬ ìš”ì²­ network() í•¨ìˆ˜ê°€ ìˆë‹¤ê³  ê°€ì •í•œë‹¤ë©´ ì•„ë˜ì˜ ì½”ë“œëŠ” ì–´ë–»ê²Œ ë™ì‘í• ê¹Œ

```javascript
network();
console.log(1);
network();
console.log(2);
network();
console.log(3);
```

> ğŸ’¡ìë°” ìŠ¤í¬ë¦½íŠ¸ëŠ” **ì‹±ê¸€ ìŠ¤ë ˆë“œ** ì´ê¸° ë•Œë¬¸ì—, **í•˜ë‚˜ì˜ ì½œ ìŠ¤íƒ**ì„ ê°€ì§€ë©° í•œ ë²ˆì— **í•˜ë‚˜ì˜ ì¼**(Task)ë§Œ ì²˜ë¦¬ í•  ìˆ˜ ìˆë‹¤.

network() í˜¸ì¶œ -> 10ì´ˆ ë”œë ˆì´ -> 1ì¶œë ¥ -> network() í˜¸ì¶œ -> 10ì´ˆ ë”œë ˆì´ -> 2ì¶œë ¥ -> network() í˜¸ì¶œ -> 10ì´ˆë”œë ˆì´ -> 3ì¶œë ¥
ì´ì™€ ê°™ì´ íŠ¹ì • ì½”ë“œê°€ ì˜¤ë˜ ê±¸ë ¤ ë‹¤ë¥¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ì§€ ëª»í•˜ê²Œ ë˜ì–´ **blockì´** ëœ ìƒíƒœë¼ê³  ì„¤ëª… í•  ìˆ˜ ìˆë‹¤.

ìƒê°ë§Œí•´ë„ ë„ˆë¬´ ë‹µë‹µí•œ ìƒí™©ì´ë‹¤. ì–´ë–»ê²Œ blockí˜„ìƒì„ íƒ€ê°œí• ìˆ˜ ìˆì„ê¹Œ?

ì´ ë•Œ íš¨ê³¼ì ìœ¼ë¡œ eventë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ê²ƒì´ ë°”ë¡œ `Web API`ì™€ `Callback Queue`, `event loop`ì´ë‹¤.

## 2. ğŸ¬ì´ë²¤íŠ¸ ë£¨í”„(Event Loop)

### 2-1. Web APIì™€ Callback Queue

> ğŸ’¡ì§€ê¸ˆê¹Œì§€ ë°°ìš´ ì½œ ìŠ¤íƒì˜ ê°œë…ì„ í™œìš©í•˜ë©´ ì½œ ìŠ¤íƒì´ ëª¨ë‘ ì‹¤í–‰ í•  ê²ƒ ê°™ì§€ë§Œ, JSì—”ì§„ì—ëŠ” `setTimeout`, `ajax`, `EventListner` ë“± í•¨ìˆ˜ê°€ ì—†ê¸° ë•Œë¬¸ì— ì›¹ ë¸Œë¼ìš°ì €ê°€ ëŒ€ì‹  ì‹¤í–‰í•´ì£¼ì–´ì•¼ í•œë‹¤. ì—¬ê¸°ì„œ ë°”ë¡œ **â€œë™ì‹œì„±â€** ê°œë…ì´ ë‚˜ì˜¨ë‹¤. JSê°€ ì‹±ê¸€ ì“°ë ˆë“œ ê¸°ë°˜ì„ì—ë„ ë¶ˆêµ¬í•˜ê³  ë™ì‹œì„± ì–¸ì–´ë¼ê³  ë¶€ë¥´ëŠ” ì´ìœ ëŠ” ì›¹ ë¸Œë¼ìš°ì €ê°€ ì œê³µí•˜ëŠ” Web APIë¥¼ í†µí•´ ë™ì‹œì— ì‘ì—…ì„ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.
> ì¦‰, ìë°”ìŠ¤í¬ë¦½íŠ¸ ìì²´ëŠ” ì‹±ê¸€ ìŠ¤ë ˆë“œ ì´ì§€ë§Œ, ìë°”ìŠ¤í¬ë¦½íŠ¸ ëŸ°íƒ€ì„(Brower, Node)ì€ ì‹±ê¸€ ìŠ¤ë ˆë“œê°€ ì•„ë‹ˆë¼ê³  í‘œí˜„ í•  ìˆ˜ ìˆë‹¤.

ì•„ë˜ì˜ ì½”ë“œê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•´ë³´ì.

```javascript
console.log('Hi')
setTimeout(() => cb(){
   consol.log('ladin');
},5000)
console.log('my name is')
```

1. 'Hi'ê°€ ì¶œë ¥ëœë‹¤!<img src="https://velog.velcdn.com/images/radin/post/5d7784c6-49f9-440e-95f4-0d9a2ba22b66/image.png" width="200px"/>
2. setTime cbê°€ stackì— ìŒ“ì¸ë‹¤.<img src="https://velog.velcdn.com/images/radin/post/32ec30bb-25f6-4f55-98b6-b1127ce29d95/image.png" width="200px"/>
3. setTime cbê°€ Web Apië¡œ ì´ë™
   <img src="https://velog.velcdn.com/images/radin/post/247db162-3d31-4908-bf34-150d0425940a/image.png" width="520px"/>
4. my name is ê°€ ì¶œë ¥ëœë‹¤.
   <img src="https://velog.velcdn.com/images/radin/post/5fed1e66-f280-44ca-9b41-ed9f608a1af4/image.png" width="520px"/>
5. timer 5ì´ˆê°€ ì§€ë‚˜ cbê°€ callBack Queue ëŒ€ê¸°ì—´ì— ë“¤ì–´ê°„ë‹¤.
   <img src="https://velog.velcdn.com/images/radin/post/c07c2778-127c-41d5-9701-876bee1bcf28/image.png" width="520px"/>
6. cbê°€ cabllback Queueì—ì„œ call Stackì— ë“¤ì–´ê°„ë‹¤.
   <img src="https://velog.velcdn.com/images/radin/post/ae5848d1-d900-49e9-8089-13045be6b70e/image.png" width="520px"/>
7. cbê°€ ì‹¤í–‰ë˜ë©° log ladinì´ ì¶œë ¥ëœë‹¤!ğŸ™‚
   <img src="https://velog.velcdn.com/images/radin/post/2064fac1-565f-4c71-8a21-19abc9f029cc/image.png" width="520px"/>

> ì—¬ê¸°ê¹Œì§€ CallStackì—ì„œ Web Api ê·¸ë¦¬ê³  CallBack Queueê°€ ë™ì‘í•˜ëŠ” ë¡œì§ì„ ê°„ë‹¨í•˜ê²Œ ì‚´í´ë³´ì•˜ë‹¤.
> ì¦‰, `Web Api`ëŠ” DOM, AJAX, setTimeout ë“± ë¸Œë¼ìš°ì €ê°€ ì œê³µí•˜ëŠ” APIë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©° JavaScript ì—”ì§„ì˜ ì“°ë ˆë“œì™€ëŠ” ë‹¤ë¥¸ ë³„ë„ì˜ ì“°ë ˆë“œë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤.
> `CallBack Queue`ëŠ” ì›¹ APIë¥¼ ì²˜ë¦¬í•˜ê³  ìˆë˜ ì“°ë ˆë“œë¡œë¶€í„° ì „ë‹¬ë°›ì€ ì½œë°± í•¨ìˆ˜ë“¤ì˜ ì‹¤í–‰ì„ ê¸°ë‹¤ë¦¬ëŠ”(ëŒ€ê¸°ì—´) ê³³ì´ë‹¤. ì—¬ê¸°ì— `ì €ì¥ëœ ì½œë°± í•¨ìˆ˜ë“¤ì€ ìŠ¤íƒì´ ë¹„ëŠ” ìˆœê°„ ìŠ¤íƒì— ìˆœì„œëŒ€ë¡œ í‘¸ì‹œ` ëœë‹¤.

### 2-2 ğŸ¤”ì´ë²¤íŠ¸ ë£¨í”„(EventLoop)ê°€ ê·¸ë˜ì„œ ë­ì•¼?

![](https://velog.velcdn.com/images/radin/post/f5fc8f91-4ad6-4152-96ae-b7617fa22c51/image.gif)

**ì½œ ìŠ¤íƒ**ì—ì„œ ë¶€í„° **ì›¹ Api**, **ì½œë°± í** ê·¸ë¦¬ê³  ë‹¤ì‹œ **ì½œ ìŠ¤íƒ**ê¹Œì§€ ë™ì‘ í•˜ëŠ”ë™ì•ˆ `ì½œ ìŠ¤íƒì´ ë¹„ì—ˆì„ë•Œ ì½œë°± íì—ì„œ ì½œ ìŠ¤íƒ ìœ¼ë¡œ í‘¸ì‹œ í•œë‹¤.` ê·¸ë ‡ë‹¤ë©´ ëˆ„ê°€ ë§¤ ìˆœê°„ ìŠ¤íƒì´ ë¹„ì–´ìˆëŠ”ì§€ ì—¬ë¶€ì™€ ì½œë°± íì— ì½œë°± í•¨ìˆ˜ê°€ ê¸°ë‹¤ë¦¬ê³  ìˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ê³„ì† í™•ì¸ í•˜ë©° ê°ì‹œí• ê¹Œ ê·¸ ì¹œêµ¬ê°€ ë°”ë¡œ `ì´ë²¤íŠ¸ ë£¨í”„`ì´ë‹¤.
ì´ë²¤íŠ¸ ë£¨í”„ëŠ” ì´ë¦„ ê·¸ëŒ€ë¡œ ê°™ì€ ì‘ì—…ì„ ë¬´í•œíˆ ë°˜ë³µí•˜ëŠ” ë¬´í•œ ë£¨í”„ë¼ê³  ìƒê°í•˜ë©´ ì´í•´í•˜ê¸° ì‰¬ìš¸ ê²ƒì´ë‹¤. ì°¸ê³ ë¡œ ì´ë ‡ê²Œ ë§¤ ìˆœê°„ íƒœìŠ¤í¬ íì™€ ìŠ¤íƒì„ í™•ì¸í•˜ëŠ” ì‘ì—…ì„ `í‹±(Tick)`ì´ë¼ê³  ë¶€ë¥¸ë‹¤.

## ğŸ¥¸ë§ˆë¬´ë¦¬

> ì´ë²ˆ EventLoopì— ëŒ€í•´ ê³µë¶€í•˜ë©° Javascriptê°€ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ë˜ ì™œ `non-bloking`, `ë™ì‹œì„±`ì„ ê°€ì§€ëŠ”ì§€ í™•ì‹¤íˆ ì´í•´ë¥¼ í•˜ê²Œëœ ê³„ê¸°ê°€ ë˜ì—ˆë‹¤.
> ì„¤ëª… ëŒ€ë¶€ë¶„ì´ ì›¹ë¸Œë¼ìš°ì € í™˜ê²½ ê¸°ë°˜ìœ¼ë¡œ ê¸€ì„ ì‘ì„±í•˜ì—¬ Nodeì—ì„œëŠ” ì–´ë–»ê²Œ ë™ì‘ë˜ëŠ”ì§€ ì°¾ì•„ ë³´ì•˜ëŠ”ë° Nods.jsëŠ” ë¹„ë™ê¸° ì§€ì›ì„ ìœ„í•´ `libuv`ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©°, ì´ libuv ê°€ ì´ë²¤íŠ¸ ë£¨í”„ë¥¼ ì œê³µí•œë‹¤. ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ ë¹„ë™ê¸° ì‘ì—…ì„ ìœ„í•´ ë…¸ë“œjsì˜ apië¥¼ í˜¸ì¶œí•˜ë©°, ì´ ë•Œ ë„˜ê²¨ì§„ ì½œë°±ì€ libuvì˜ ì´ë²¤íŠ¸ ë£¨í”„ë¥¼ í†µí•´ ìŠ¤ì¼€ì¥´ë˜ê³  ì‹¤í–‰ ëœë‹¤ê³  í•œë‹¤.
> CallStackì˜ Stack í•˜ë‚˜ë§ˆë‹¤ **execution context(ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸)**ê°€ ë§Œë“¤ì–´ì§€ëŠ”ë° ì´ì–´ì„œ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ë¥¼ ë”¥ ë‹¤ì´ë¸Œ í›„ ì •ë¦¬í•´ ë³¼ ì˜ˆì •ì´ë‹¤.

> ì°¸ê³  ìë£Œ
> ì˜ìƒ
> https://www.youtube.com/watch?v=8aGhZQkoFbQ&t=1422s
> ê¸€
> https://dev.to/lydiahallie/javascript-visualized-event-loop-3dif
> https://medium.com/@Rahulx1/understanding-event-loop-call-stack-event-job-queue-in-javascript-63dcd2c71ecd
> https://medium.com/@gaurav.pandvia/understanding-javascript-function-executions-tasks-event-loop-call-stack-more-part-1-5683dea1f5ec
